<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Eiffel RemRem Publish Service : ">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Eiffel REMReM Publish</title>
</head>

<body>

<!-- HEADER -->
<div id="header_wrap" class="outer">
    <header class="inner">
        <a id="forkme_banner" href="https://github.com/Ericsson/eiffel-remrem-publish">View on GitHub</a>

        <h1><a class="project_title" href="index.html#project_title"></a>Eiffel REMReM Publish</h1>

        <section id="downloads">
            <a class="zip_download_link" href="https://github.com/Ericsson/eiffel-remrem-publish/zipball/master">Download this project as a .zip file</a>
            <a class="tar_download_link" href="https://github.com/Ericsson/eiffel-remrem-publish/tarball/master">Download this project as a tar.gz file</a>
        </section>
    </header>
</div>

<!-- MAIN CONTENT -->
<div id="main_content_wrap" class="outer">
    <section id="main_content" class="inner">

        <h1>
            <a id="remrem-publish-service" class="anchor" href="#remrem-publish-service" aria-hidden="true">
                <span aria-hidden="true" class="octicon octicon-link"></span>
            </a>REMReM Publish Service
        </h1>

        <p>REMReM Publish Service allows for sending messages to a topic-based exchange on a RabbitMQ Server.</p>

        <p>Information about the REMReM Publish Service all endpoints can be got and easily accessed using next links:</p>
        <pre>http://&lt;host&gt;:&lt;port&gt;/&lt;application name&gt;/</pre> or <pre>http://&lt;host&gt;:&lt;port&gt;/&lt;application name&gt;/swagger-ui.html</pre>

        <p>Example:</p>
        <pre>http://localhost:8080/publish/</pre>

        <h2>
            <a id="configuration" class="anchor" href="#configuration" aria-hidden="true">
                <span aria-hidden="true" class="octicon octicon-link"></span>
            </a>Configuration
        </h2>

        <p>For using Eiffel REMReM Service <strong>publish-service.war</strong> file should be deployed in Tomcat Server.
            For doing this, publish-service.war file should locate in next directory: <em>tomcat/webapps</em>.
        </p>

        <p>Configuration is done in Tomcat using a config.properties file:Â <em>tomcat/conf/config.properties</em>.</p>

        <p><strong>NOTE:</strong> in each example assuming the publish-service.war is deployed in tomcat as <strong>publish</strong>.</p>

        <h3>Exchange configurations:</h3>

        <p>These parameters are related to RabbitMQ Server, which will be used for publishing events:</p>

        <pre>
&lt;protocol&gt;.rabbitmq.host:          &lt;host name, eg: localhost&gt;
&lt;protocol&gt;.rabbitmq.port:          &lt;port, eg: 5672&gt;
&lt;protocol&gt;.rabbitmq.username:      &lt;username, default for RabbitMQ Server: guest&gt;
&lt;protocol&gt;.rabbitmq.password:      &lt;password, default for RabbitMQ Server: guest&gt;
&lt;protocol&gt;.rabbitmq.tls:           &lt;tls, is optional&gt;
&lt;protocol&gt;.rabbitmq.exchangeName:  &lt;exchange name, exchange should be already created on RabbitMQ Server&gt;
&lt;protocol&gt;.rabbitmq.domainId:      &lt;domain id, any string&gt;</pre>

        <p>An <a href="https://www.rabbitmq.com/tutorials/tutorial-three-java.html">exchange point</a> must exist before starting the service.</p>

        <p><code>&lt;protocol&gt;</code> is name of the protocol used.
            For now two protocols are used: <code>eiffel3</code> (for Eiffel1.0 events) and <code>eiffelsemantics</code> (for Eiffel2.0 events).
        </p>

        <p><strong>NOTE:</strong> properties above should be configured for each protocol, that users are going to use.</p>

        <h3>Ldap authentication configurations:</h3>

        <p>Active Directory authentication can be enabled for the REMReM Publish Service by setting the configuration property
            <code>activedirectory.publish.enabled=true</code>.
        </p>

        <pre>
activedirectory.publish.enabled:  &lt;true|false&gt;
activedirectory.ldapUrl:          &lt;LDAP server url&gt;
activedirectory.managerPassword:  &lt;LDAP server manager password(must be base64 Encrypted format)&gt;
activedirectory.managerDn:        &lt;LDAP managerDn pattern&gt;
activedirectory.rootDn:           &lt;LDAP rootDn pattern&gt;
activedirectory.userSearchFilter: &lt;LDAP userSearchFilter pattern&gt;</pre>

        <p><strong>LDAP authentication without Base64 encryption:</strong></p>
        <pre><code>curl -XPOST -H "Content-Type: application/json" --user username:password --data @ActivityCanceled.json "http://localhost:8080/publish/producer/msg?mp=eiffelsemantics"</code></pre>

        <p><strong>NOTE:</strong> each HTTP request must then include an Authorization header with value
            <code>Basic &lt;Base64 encoded username:password&gt;</code>.
        </p>

        <p><strong>LDAP authentication with Base64 encryption:</strong></p>
        <pre><code>curl -XPOST -H "Content-Type: application/json" -H 'Authorization: Basic cGFzc3dvcmQ=' --data @ActivityCanceled.json "http://localhost:8080/publish/producer/msg?mp=eiffelsemantics"</code></pre>

        <h3>Generate Service configurations for Publish Service</h3>

        <p>Properties below are important for correct work of <strong>/generateAndPublish</strong> endpoint.</p>

        <pre>
generate.server.host:    &lt;host, where generate service is deployed, eg: localhost&gt;
generate.server.port:    &lt;port, eg: 8080&gt;
generate.server.appName: &lt;application name of generate service, eg: generate&gt;</pre>


        <h2>
            <a id="usage" class="anchor" href="#usage" aria-hidden="true">
                <span aria-hidden="true" class="octicon octicon-link"></span>
            </a>Usage
        </h2>

        <p>The request body must contain a <strong>JSON Object or JSON Array</strong> with the messages.</p>

        <table style="width:100%">
            <tr>
                <th>Resource</th>
                <th>Method</th>
                <th>Parameters</th>
                <th>Request body</th>
                <th>Description</th>
            </tr>
            <tr>
                <td>/generateAndPublish</td>
                <td>POST</td>
                <td>
                    <p>mp - message protocol, required</p>
                    <p>msgType - message type, required</p>
                    <p>ud - user domain, not required</p>
                    <p>tag - not required</p>
                    <p>rk - routing key, not required</p>
                </td>
                <td style="margin:0px;">
<pre>{
  "meta": {
    # Matches the meta object
  },
  "data": {
    # Matches the data object
  },
  "links": {
    # Matches the links object
  }
}</pre>
                </td>
                <td width="20%">This endpoint is used to publish already generated Eiffel event to message bus.</td>
            </tr>
            <tr>
                <td>/eiffelsemantics</td>
                <td>POST</td>
                <td>
                    <p>mp - message protocol, required</p>
                    <p>ud - user domain, not required</p>
                    <p>tag - not required</p>
                    <p>rk - routing key, not required</p>
                </td>
                <td style="margin:0px;">
<pre>{
  "msgParams": {
    "meta": {
      # Matches the meta object
    }
  },
  "eventParams": {
    "data": {
      # Matches the data object
    },
    "links": {
      # Matches the links object
    }
  }
}</pre>
                </td>
                <td width="20%">
                    <p>This endpoint is used to generate and publish Eiffel events to message bus.
                        It provides single endpoint for both REMReM Generate and REMReM Publish.</p>
                    <p>The service works on the relative link <code>/generateAndPublish</code> if run as standalone application or
                        <code>/publish/generateAndPublish</code> if run as tomcat app.</p>
                </td>
            </tr>
            <tr>
                <td>/versions</td>
                <td>GET</td>
                <td></td>
                <td style="margin:0px;"></td>
                <td width="20%">This endpoint is used to get versions of publish service and all loaded  protocols.</td>
            </tr>
        </table>

        <h2>
            <a id="examples" class="anchor" href="#examples" aria-hidden="true">
                <span aria-hidden="true" class="octicon octicon-link"></span>
            </a>Examples
        </h2>

        <p>You can use command line tools like <a href="https://en.wikipedia.org/wiki/CURL">curl</a> or some plugin for your favorite browser. For example:</p>

        <ul>
            <li>
                <a href="https://chrome.google.com/webstore/detail/postman/fhbjgbiflinjbdggehcddcbncdddomop">Postman</a> for Chromium-based browsers
            </li>
            <li>
                <a href="https://addons.mozilla.org/en-US/firefox/addon/httprequester/">HttpRequester</a> for Firefox
            </li>
        </ul>

        <h3>
            <a id="examples1" class="anchor" href="#examples1" aria-hidden="true">
                <span aria-hidden="true" class="octicon octicon-link"></span>
            </a>Examples for <code>/producer/msg</code> endpoint:
        </h3>

        <h5>One message:</h5>
        <pre><code>curl -H "Content-Type: application/json" -X POST -d '[{"meta":{"id":"963da060-f2cf-4370-a68d-67fd872def36","type":"EiffelActivityFinishedEvent","version":"1.1.0","time":1513758440588,"tags":["tag1","tag2"],"source":{"domainId":"example.domain","host":"host","name":"name","serializer":{"groupId":"com.github.Ericsson","artifactId":"eiffel-remrem-semantics","version":"0.3.1"},"uri":"http://java.sun.com/j2se/1.3/"},"security":{"sdm":{"authorIdentity":"test","encryptedDigest":"sample"}}},"data":{"outcome":{"conclusion":"SUCCESSFUL"},"persistentLogs":[{"name":"firstLog","uri":"http://myHost.com/firstLog"},{"name":"otherLog","uri":"isbn:0-486-27557-4"}],"customData":[]},"links":[{"type":"ACTIVITY_EXECUTION","target":"aaaaaaaa-bbbb-5ccc-8ddd-eeeeeeeeeee1"}]}]' "http://localhost:8080/publish/producer/msg?mp=eiffelsemantics"</code></pre>
        <p>Result:</p>
        <pre>{"events":[{"id":"963da060-f2cf-4370-a68d-67fd872def36","status_code":200,"result":"SUCCESS","message":"Event sent successfully"}]}</pre>

        <h5>Two messages/objects and given user domain suffix:</h5>
        <pre><code>curl -H "Content-Type: application/json" -X POST -d '[{"meta":{"id":"963da060-f2cf-4370-a68d-67fd872def36","type":"EiffelActivityFinishedEvent","version":"1.1.0","time":1513758440588,"tags":["tag1","tag2"],"source":{"domainId":"example.domain","host":"host","name":"name","serializer":{"groupId":"com.github.Ericsson","artifactId":"eiffel-remrem-semantics","version":"0.3.1"},"uri":"http://java.sun.com/j2se/1.3/"},"security":{"sdm":{"authorIdentity":"test","encryptedDigest":"sample"}}},"data":{"outcome":{"conclusion":"SUCCESSFUL"},"persistentLogs":[{"name":"firstLog","uri":"http://myHost.com/firstLog"},{"name":"otherLog","uri":"isbn:0-486-27557-4"}],"customData":[]},"links":[{"type":"ACTIVITY_EXECUTION","target":"aaaaaaaa-bbbb-5ccc-8ddd-eeeeeeeeeee1"}]},{"meta":{"id":"963da060-f2cf-4370-a68d-67fd872dek89","type":"EiffelActivityFinishedEvent","version":"1.1.0","time":1513758440998,"tags":["tag1","tag2"],"source":{"domainId":"example.domain","host":"host","name":"name","serializer":{"groupId":"com.github.Ericsson","artifactId":"eiffel-remrem-semantics","version":"0.3.1"},"uri":"http://java.sun.com/j2se/1.3/"},"security":{"sdm":{"authorIdentity":"test","encryptedDigest":"sample"}}},"data":{"outcome":{"conclusion":"SUCCESSFUL"},"persistentLogs":[{"name":"firstLog","uri":"http://myHost.com/firstLog"},{"name":"otherLog","uri":"isbn:0-486-27557-4"}],"customData":[]},"links":[{"type":"ACTIVITY_EXECUTION","target":"aaaaaaaa-bbbb-5ccc-8ddd-eeeeeeeeeee1"}]}]' "http://localhost:8080/publish/producer/msg?ud=fem001&mp=eiffelsemantics"</code></pre>
        <p>Result:</p>
        <pre>{"events":[{"id":"963da060-f2cf-4370-a68d-67fd872def36","status_code":200,"result":"SUCCESS","message":"Event sent successfully"},{"id":"963da060-f2cf-4370-a68d-67fd872dek89","status_code":200,"result":"SUCCESS","message":"Event sent successfully"}]}</pre>

        <h5>One message and given tag:</h5>
        <pre><code>curl -H "Content-Type: application/json" -X POST -d '[{"meta":{"id":"963da060-f2cf-4370-a68d-67fd872def36","type":"EiffelActivityFinishedEvent","version":"1.1.0","time":1513758440588,"tags":["tag1","tag2"],"source":{"domainId":"example.domain","host":"host","name":"name","serializer":{"groupId":"com.github.Ericsson","artifactId":"eiffel-remrem-semantics","version":"0.3.1"},"uri":"http://java.sun.com/j2se/1.3/"},"security":{"sdm":{"authorIdentity":"test","encryptedDigest":"sample"}}},"data":{"outcome":{"conclusion":"SUCCESSFUL"},"persistentLogs":[{"name":"firstLog","uri":"http://myHost.com/firstLog"},{"name":"otherLog","uri":"isbn:0-486-27557-4"}],"customData":[]},"links":[{"type":"ACTIVITY_EXECUTION","target":"aaaaaaaa-bbbb-5ccc-8ddd-eeeeeeeeeee1"}]}]' "http://localhost:8080/publish/producer/msg?mp=eiffelsemantics&tag=production"</code></pre>
        <p>Result:</p>
        <pre>{"events":[{"id":"963da060-f2cf-4370-a68d-67fd872def36","status_code":200,"result":"SUCCESS","message":"Event sent successfully"}]}</pre>

        <h5>One message and given routing key:</h5>
        <pre><code>curl -H "Content-Type: application/json" -X POST -d '[{"meta":{"id":"963da060-f2cf-4370-a68d-67fd872def36","type":"EiffelActivityFinishedEvent","version":"1.1.0","time":1513758440588,"tags":["tag1","tag2"],"source":{"domainId":"example.domain","host":"host","name":"name","serializer":{"groupId":"com.github.Ericsson","artifactId":"eiffel-remrem-semantics","version":"0.3.1"},"uri":"http://java.sun.com/j2se/1.3/"},"security":{"sdm":{"authorIdentity":"test","encryptedDigest":"sample"}}},"data":{"outcome":{"conclusion":"SUCCESSFUL"},"persistentLogs":[{"name":"firstLog","uri":"http://myHost.com/firstLog"},{"name":"otherLog","uri":"isbn:0-486-27557-4"}],"customData":[]},"links":[{"type":"ACTIVITY_EXECUTION","target":"aaaaaaaa-bbbb-5ccc-8ddd-eeeeeeeeeee1"}]}]' "http://localhost:8080/publish/producer/msg?mp=eiffelsemantics&rk=myroutingkey"</code></pre>
        <p>Result:</p>
        <pre>{"events":[{"id":"963da060-f2cf-4370-a68d-67fd872def36","status_code":200,"result":"SUCCESS","message":"Event sent successfully"}]}</pre>

        <p><strong>NOTE:</strong> for any protocol, provide the Java opts as: </p>
        <pre>set JAVA_OPTS="-Djava.ext.dirs=/path/to/jars/" in catalina.sh</pre>
        <p><strong>NOTE:</strong> in the above example, protocol jar file must be present inside "/path/to/jars/" folder.</p>

        <h5>Reading data from a file:</h5>
        <pre><code>curl -H "Content-Type: application/json" -X POST --data-binary "@test.data" "http://localhost:8080/publish/producer/msg?mp=eiffelsemantics"</code></pre>
        <p>Result:</p>
        <pre>{"events":[{"id":"963da060-f2cf-4370-a68d-67fd872def36","status_code":200,"result":"SUCCESS","message":"Event sent successfully"},{"id":"963da060-f2cf-4370-a68d-67fd872dek89","status_code":200,"result":"SUCCESS","message":"Event sent successfully"}]}</pre>

        <h5>Malformed input:</h5>
        <pre><code>curl -H "Content-Type: application/json" -X POST -d '[{Message}]' "http://localhost:8080/publish/producer/msg?ud=fem001&mp=eiffel3"</code></pre>
        <p>Result:</p>
        <pre>{"timestamp":"Dec 27, 2017 3:34:11 PM","status":400,"error":"Bad Request","exception":"org.springframework.http.converter.HttpMessageNotReadableException","message":"Could not read JSON: ..."}</pre>

        <h3>
            <a id="examples2" class="anchor" href="#examples2" aria-hidden="true">
                <span aria-hidden="true" class="octicon octicon-link"></span>
            </a>Examples for <code>/generateAndPublish</code> endpoint:
        </h3>

        <h5>Correct message:</h5>
        <pre><code>curl -H "Content-Type: application/json" -X POST -d '{"msgParams": {"meta": {"type": "EiffelActivityFinishedEvent", "tags": ["tag1","tag2"], "source": {"domainId": "example.domain", "host": "host", "name": "name", "uri": "http://java.sun.com/j2se/1.3/", "gav": {"groupId": "com.github.Ericsson", "artifactId": "eiffel-remrem-semantics", "version": "0.2.9"}}, "security": {"sdm": {"authorIdentity": "test", "encryptedDigest": "sample"}}}}, "eventParams": {"data": {"outcome": {"conclusion": "SUCCESSFUL"}, "persistentLogs": [{"name": "firstLog", "uri": "http://myHost.com/firstLog"}, {"name": "otherLog", "uri": "isbn:0-486-27557-4"}]}, "links": [{"type": "ACTIVITY_EXECUTION", "target": "aaaaaaaa-bbbb-5ccc-8ddd-eeeeeeeeeee1"}]}}' "http://localhost:8080/publish/generateAndPublish?mp=eiffelsemantics&msgType=EiffelActivityFinished"</code></pre>
        <p>Result:</p>
        <pre>{"events":[{"id":"963da060-f2cf-4370-a68d-67fd872def36","status_code":200,"result":"SUCCESS","message":"Event sent successfully"}]}</pre>

        <h5>Incorrect message protocol:</h5>
        <pre><code>curl -H "Content-Type: application/json" -X POST -d '{"msgParams": {"meta": {"type": "EiffelActivityFinishedEvent", "tags": ["tag1","tag2"], "source": {"domainId": "example.domain", "host": "host", "name": "name", "uri": "http://java.sun.com/j2se/1.3/", "gav": {"groupId": "com.github.Ericsson", "artifactId": "eiffel-remrem-semantics", "version": "0.2.9"}}, "security": {"sdm": {"authorIdentity": "test", "encryptedDigest": "sample"}}}}, "eventParams": {"data": {"outcome": {"conclusion": "SUCCESSFUL"}, "persistentLogs": [{"name": "firstLog", "uri": "http://myHost.com/firstLog"}, {"name": "otherLog", "uri": "isbn:0-486-27557-4"}]}, "links": [{"type": "ACTIVITY_EXECUTION", "target": "aaaaaaaa-bbbb-5ccc-8ddd-eeeeeeeeeee1"}]}}' "http://localhost:8080/publish/generateAndPublish?mp=incorrecteiffelprotocol&msgType=EiffelActivityFinished"</code></pre>
        <p>Result:</p>
        <pre>{"status_code":503,"result":"FAIL","message":"Message protocol is invalid"}</pre>

        <h5>Incorrect message type:</h5>
        <pre><code>curl -H "Content-Type: application/json" -X POST -d '{"msgParams": {"meta": {"type": "EiffelActivityFinishedEvent", "tags": ["tag1","tag2"], "source": {"domainId": "example.domain", "host": "host", "name": "name", "uri": "http://java.sun.com/j2se/1.3/", "gav": {"groupId": "com.github.Ericsson", "artifactId": "eiffel-remrem-semantics", "version": "0.2.9"}}, "security": {"sdm": {"authorIdentity": "test", "encryptedDigest": "sample"}}}}, "eventParams": {"data": {"outcome": {"conclusion": "SUCCESSFUL"}, "persistentLogs": [{"name": "firstLog", "uri": "http://myHost.com/firstLog"}, {"name": "otherLog", "uri": "isbn:0-486-27557-4"}]}, "links": [{"type": "ACTIVITY_EXECUTION", "target": "aaaaaaaa-bbbb-5ccc-8ddd-eeeeeeeeeee1"}]}}' "http://localhost:8080/publish/generateAndPublish?mp=eiffelsemantics&msgType=incorrectmessagetype"</code></pre>
        <p>Result:</p>
        <pre>{"status_code":400,"result":"FAIL","message":"Malformed JSON or incorrect type of event"}</pre>

        <h3>
            <a id="examples3" class="anchor" href="#examples3" aria-hidden="true">
                <span aria-hidden="true" class="octicon octicon-link"></span>
            </a>Examples for <code>/versions</code> endpoint:
        </h3>
        <pre><code>curl -H "Content-Type: application/json" -X GET http://localhost:8080/generate/versions</code></pre>
        <p>Result:</p>
        <pre>{"serviceVersion":{"version":"x.x.x"},"endpointVersions":{"semanticsVersion":"x.x.x","eiffel3MessagingVersion":"x.x.x"}}</pre>

        <h2>
            <a id="statusCodes" class="anchor" href="#statusCodes" aria-hidden="true">
                <span aria-hidden="true" class="octicon octicon-link"></span>
            </a>Status Codes
        </h2>

        <p>The response generated will have internal status codes for each and every event based on the input JSON provided.
            Status codes are generated according to the below tables.
        </p>
        <p><strong>NOTE:</strong> we have a status code on the HTTP response and an internal status code.</p>

        <p><strong>HTTP response codes:</strong></p>
        <table class="wikitable">
            <tr>
                <th style="text-align:left;">Status code</th>
                <th style="text-align:left;">HTTP response</th>
                <th style="text-align:left;">Comment</th>
            </tr>
            <tr>
                <td>200</td>
                <td>OK</td>
                <td>Status code of 200 is returned if the event is published successfully.</td>
            </tr>
            <tr>
                <td>207</td>
                <td>Multi Status</td>
                <td>Status code of 207 is returned if we have a mix of internal status codes, i.e. Publish of few events was successful and few
                    events was a failure. It is only applicable for batch publishing.<br>
                    Incase of Multiple events in the body JSON, if a event is given internal status code of 400 or 500 rest events will not be
                    published and will be given a internal status code of 503, which will result in overall HTTP response code of 207.
                </td>
            </tr>
            <tr>
                <td>400</td>
                <td>Bad Request</td>
                <td> Status code of 400 is returned if the request body JSON is malformed. i.e. Unable to parse the body JSON. This status code is
                    applicable if request body JSON is a single event or multiple events.
                </td>
            </tr>
            <tr>
                <td>404</td>
                <td>Not Found</td>
                <td>Status code of 404 is returned if RabbitMQ message broker properties are not found for the requested protocol. This status
                        code is applicable if request body JSON is a single event or multiple events.
                </td>
            </tr>
            <tr>
                <td>500</td>
                <td>Internal Server Error</td>
                <td>Status code of 500 is returned if RabbitMQ is down or could not prepare routing key to publish the eiffel event. This status
                    code is applicable if request body JSON is a single event.
                </td>
            </tr>
        </table>

        <p><strong>Internal status codes:</strong></p>
        <table class="wikitable">
            <tr>
                <th style="text-align:left;">Status code</th>
                <th style="text-align:left;">Result</th>
                <th style="text-align:left;">Message</th>
                <th style="text-align:left;">Comment</th>
            </tr>
            <tr>
                <td>200</td>
                <td>SUCCESS</td>
                <td>Event sent successfully</td>
                <td>Status code of 200 is returned if the request is completed successfully.</td>
            </tr>
            <tr>
                <td>400</td>
                <td>Bad Request</td>
                <td>Invalid event content, client need to fix problem in event before submitting again</td>
                <td>Status code of 400 is returned if the request body JSON is malformed. i.e. Unable to parse the body JSON.
                    Applicable to single and multiple events in JSON (or) an event has a missing ID field.
                </td>
            </tr>
            <tr>
                <td>404</td>
                <td>RabbitMQ properties not found</td>
                <td>RabbitMQ properties not configured for the protocol &lt;protocol&gt;</td>
                <td>Status code of 404 is returned if RabbitMQ message broker properties are not found for the event.</td>
            </tr>
            <tr>
                <td rowspan="2">500</td>
                <td rowspan="2">Internal Server Error</td>
                <td>RabbitMQ is down. Please try later</td>
                <td>Status code of 500 is returned if RabbitMQ is down.</td>
            </tr>
            <tr>
                <td>Could not prepare Routing key to publish message.</td>
                <td>Status code of 500 is returned if could not prepare routing key to publish the eiffel event.</td>
            </tr>
            <tr>
                <td>503</td>
                <td>Service Unavailable</td>
                <td>Please check previous event and try again later</td>
                <td>Status code of 503 is returned if there is a failure in publishing previous event with 400, 404 or 500 error.</td>
            </tr>
        </table>

        <p><strong>Status Codes explanation:</strong></p>

        <p><strong>200:</strong> when all the events are sent successfully, then the internal status code for each event and status code for HTTP
                response will be 200.
        </p>
        <pre><code><strong>HTTP Response:</strong> 200 :OK
            [
                {
                 "id":"9cdd0f68-df85-44b0-88bd-fc4163ac90a0",
                 "status_code":200,
                 "result":"SUCCESS",
                 "message":"Event sent successfully"
                },
                {
                 "id":"9cdd0f68-df85-44b0-88bd-fc4163ac90a1",
                 "status_code":200,
                 "result":"SUCCESS",
                 "message":"Event sent successfully"
                }
            ]</code></pre>

        <p><strong>400:</strong> when the input JSON is malformated, that particular events internal status code will be 400.</p>
        <pre><code><strong>HTTP Response:</strong> 400 :Bad Request
            [
                {
                 "status_code":400,
                 "result":"Bad Request",
                 "message":"Invalid event content, client need to fix problem in event before submitting again"
                }
            ]</code></pre>

        <p><strong>207:</strong> when the events are having different internal status codes, then the status code of HTTP response will be 207.</p>
        <pre><code><strong>HTTP Response:</strong> 207 :Multi Status
            [
                {
                 "id":"9cdd0f68-df85-44b0-88bd-fc4163ac90a0",
                 "status_code":200,
                 "result":"SUCCESS",
                 "message":"Event sent successfully"
                },
                {
                 "status_code":400,
                 "result":"Bad Request",
                 "message":"Invalid event content, client need to fix problem in event before submitting again"
                }
            ]</code></pre>

        <p><strong>500:</strong> we will get this status code, when the event is failed to send because of internal server error.</p>
        <pre><code><strong>HTTP Response:</strong> 500 :Internal Server Error
            [
                {
                 "id":"9cdd0f68-df85-44b0-88bd-fc4163ac90a0",
                 "status_code":500,
                 "result":"Internal Server Error",
                 "message":"RabbitMQ is down. Please try later"
                }
            ]</code></pre>

        <p><strong>503:</strong> event will have this status code when the previous event is failed to send.</p>
        <p>For example, consider you have 5 events.<br>
            E1<-E2<-E3<-E4<-E5<br>
            You send them all to publish in a batch command.<br>
            E1 and E2 is successful. (200)<br>
            E3 is malformatted. (400)<br>
            If we send E4 and E5 we will have a broken chain so that is not a good option. In this case we should skip sending E4 and E5 and have status code 503 for those.
        </p>
        <pre><code><Strong>HTTP Response</strong>: 207 :Multi Status
            [
                {
                 "id":"9cdd0f68-df85-44b0-88bd-fc4163ac90a0",
                 "status_code":200,
                 "result":"SUCCESS",
                 "message":"Event sent successfully"
                },
                {
                 "id":"9cdd0f68-df85-44b0-88bd-fc4163ac90a1",
                 "status_code":200,
                 "result":"SUCCESS",
                 "message":"Event sent successfully"
                },
                {
                 "status_code":400,
                 "result":"Bad Request",
                 "message":"Invalid event content, client need to fix problem in event before submitting again"
                },
                {
                 "status_code":503,
                 "result":"Service Unavailable",
                 "message":"Please check previous event and try again later"
                },
                {
                 "status_code":503,
                 "result":"Service Unavailable",
                 "message":"Please check previous event and try again later"
                }
            ]</code></pre>

        <p><strong>404:</strong> we will get this status code, when RabbitMQ properties not configured in tomcat/conf/config.properties file for the protocol.</p>
        <pre><code><strong>HTTP Response:</strong> 404 :Not Found
            [
                {
                "status_code": 404,
                "result": "RabbitMQ properties not found",
                "message": "RabbitMQ properties not configured for the protocol &lt;protocol&gt;"
                }
            ]</code></pre>

        <p><strong>500:</strong> we will get this status code, when cannot prepare routing key.</p>
        <pre><code><strong>HTTP Response:</strong> 500 :Internal Server Error
            [
                {
                "status_code": 500,
                "result": "Internal Server Error",
                "message": "Could not prepare Routing key to publish message"
                }
            ]</code></pre>

        <p>You can open the RabbitMQ's management console and find these messages in a queue.</p>

    </section>
</div>

<!-- FOOTER  -->
<div id="footer_wrap" class="outer">
    <footer class="inner">
        <p class="copyright">Eiffel REMReM Publish maintained by <a href="https://github.com/ericsson">Ericsson</a></p>
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
    </footer>
</div>

</body>
</html>
